<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head>
	<meta name="generator" content="Hugo 0.152.2"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>My work notes</title>

<meta name="description" content="è®°å½•è®ºæ–‡é˜…è¯»ä¸ä»£ç å®è·µ">
<meta name="author" content="fandengdong">
<link rel="canonical" href="http://localhost:1313/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml" title="rss">
<link rel="alternate" hreflang="en" href="http://localhost:1313/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="http://localhost:1313/">
  <meta property="og:site_name" content="My work notes">
  <meta property="og:title" content="æ¬¢è¿æ¥åˆ°æˆ‘çš„å·¥ä½œç©ºé—´">
  <meta property="og:description" content=" ğŸ“š æˆ‘çš„å·¥ä½œç¬”è®° è¿™é‡Œè®°å½•æˆ‘åœ¨äººå·¥æ™ºèƒ½ã€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œå¼€å‘å·¥å…·æ–¹é¢çš„å­¦ä¹ ä¸å®è·µã€‚ æ¬¢è¿ä¸€èµ·æ¢ç´¢æŠ€æœ¯çš„è¾¹ç•Œï¼ ğŸ§  RL ğŸ’¬ LLM ğŸ§° å·¥å…·ç®± ">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ¬¢è¿æ¥åˆ°æˆ‘çš„å·¥ä½œç©ºé—´">
<meta name="twitter:description" content="è®°å½•è®ºæ–‡é˜…è¯»ä¸ä»£ç å®è·µ">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "My work notes",
  "url": "http://localhost:1313/",
  "description": "è®°å½•è®ºæ–‡é˜…è¯»ä¸ä»£ç å®è·µ",
  "logo": "http://localhost:1313/favicon.ico",
  "sameAs": [
      
  ]
}
</script>
</head>
<body class="list" id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="My work notes (Alt + H)">My work notes</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/llm/" title="å¤§è¯­è¨€æ¨¡å‹ (LLM)">
                    <span>å¤§è¯­è¨€æ¨¡å‹ (LLM)</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/toolbox/" title="å·¥å…·ç®±">
                    <span>å·¥å…·ç®±</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/" title="æ¬¢è¿æ¥åˆ°æˆ‘çš„å·¥ä½œç©ºé—´">
                    <span class="active">æ¬¢è¿æ¥åˆ°æˆ‘çš„å·¥ä½œç©ºé—´</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<div class="post-content"><div style="text-align: center; max-width: 700px; margin: 2rem auto; padding: 0 1rem;">
  <h2>ğŸ“š æˆ‘çš„å·¥ä½œç¬”è®°</h2>
  <p style="font-size: 1.1em; color: #555; line-height: 1.6;">
    è¿™é‡Œè®°å½•æˆ‘åœ¨äººå·¥æ™ºèƒ½ã€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œå¼€å‘å·¥å…·æ–¹é¢çš„å­¦ä¹ ä¸å®è·µã€‚
    æ¬¢è¿ä¸€èµ·æ¢ç´¢æŠ€æœ¯çš„è¾¹ç•Œï¼
  </p>
<div style="display: flex; justify-content: center; gap: 2rem; margin-top: 2rem; flex-wrap: wrap;">
  <a href="/RL/" class="btn btn-primary" style="display: inline-block; padding: 0.8rem 1.5rem; background: #f0f8ff; border-radius: 12px; text-decoration: none; color: #2c3e50; font-weight: bold; box-shadow: 0 2px 6px rgba(0,0,0,0.1); transition: transform 0.2s, box-shadow 0.2s;">
    ğŸ§  RL
  </a>

  <a href="/LLM/" class="btn btn-primary" style="display: inline-block; padding: 0.8rem 1.5rem; background: #f0f8ff; border-radius: 12px; text-decoration: none; color: #2c3e50; font-weight: bold; box-shadow: 0 2px 6px rgba(0,0,0,0.1); transition: transform 0.2s, box-shadow 0.2s;">
    ğŸ’¬ LLM
  </a>

  <a href="/toolbox/" class="btn btn-primary" style="display: inline-block; padding: 0.8rem 1.5rem; background: #f0f8ff; border-radius: 12px; text-decoration: none; color: #2c3e50; font-weight: bold; box-shadow: 0 2px 6px rgba(0,0,0,0.1); transition: transform 0.2s, box-shadow 0.2s;">
    ğŸ§° å·¥å…·ç®±
  </a>

</div>
  </div>
</div>


</div>

<article class="first-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">å¼€å§‹ä½¿ç”¨ Mindspeed
    </h2>
  </header>
  <div class="entry-content">
    <p>æœ¬æŒ‡å—é€šè¿‡ç¤ºä¾‹ä»£ç æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Megatron è¿›è¡Œ Mindspeed è®­ç»ƒã€‚
Mindspeed å¹¶è¡Œç¯å¢ƒåˆå§‹åŒ– ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼çš„å¤§æ¨¡å‹è®­ç»ƒæ¡†æ¶ï¼ŒMindspeed åœ¨åˆå§‹åŒ–æœŸé—´éœ€è¦è®¾ç½®åˆ†å¸ƒå¼ç¯å¢ƒã€‚æ ¸å¿ƒåˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š
import torch import mindspeed.megatron_adaptor # å¯¼å…¥é€‚é…å™¨ä»¥ç¡®ä¿ Mindspeed ä¸ Megatron å…¼å®¹ from megatron.core import parallel_state def initialize_distributed(tensor_model_parallel_size=1, pipeline_model_parallel_size=1): parallel_state.destroy_model_parallel() # æ ‡å‡† PyTorch åˆ†å¸ƒå¼è®­ç»ƒè®¾ç½® rank = int(os.environ.get(&#39;LOCAL_RANK&#39;, 0)) world_size = int(os.environ.get(&#34;WORLD_SIZE&#34;, 1)) torch.cuda.set_device(rank) torch.distributed.init_process_group(world_size=world_size, rank=rank) # Megatron ç‰¹å®šçš„åˆ†å¸ƒå¼è®­ç»ƒåˆå§‹åŒ– parallel_state.initialize_model_parallel(tensor_model_parallel_size, pipeline_model_parallel_size) ä¸å…¸å‹çš„å¹¶è¡Œä»£ç çš„å…³é”®åŒºåˆ«åœ¨äºï¼Œé™¤äº†è°ƒç”¨æ ‡å‡†çš„ torch.distributed.init_process_group å¤–ï¼ŒMindspeed è¿˜éœ€è¦ parallel_state åˆå§‹åŒ–æ¨¡å‹å¹¶è¡Œã€‚æ³¨æ„åœ¨parallel_stateåˆå§‹åŒ–ä¸­ï¼Œéœ€è¦ä¼ å…¥TPå’ŒPPçš„å¤§å°ã€‚
æ­¤å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„ï¼Œæ·»åŠ ä»£ç è¡Œimport mindspeed.megatron_adaptoræ¥ä¿è¯Mindspeedå¯¹Megatronçš„APIè¿›è¡Œå…¼å®¹ã€‚
Mindspeed æ¨¡å‹åˆå§‹åŒ– from megatron.core.transformer.transformer_config import TransformerConfig from megatron.core.models.gpt.gpt_model import GPTModel def model_provider(): &#34;&#34;&#34; Build the model. &#34;&#34;&#34; transformer_config = TransformerConfig( num_layers=2, hidden_size=12, num_attention_heads=4, use_cpu_initialization=True, pipeline_dtype=torch.float32, params_dtype=torch.float16, # æ§åˆ¶æ¨¡å‹å‚æ•°ç±»å‹ bf16=True, # å†³å®šè®­ç»ƒçš„å‰å‘åå‘çš„è¿ç®—æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰è¢«megetron.training.get_modelå‡½æ•°è°ƒç”¨ï¼Œæ— æ•ˆæœ ) print(&#34;Creating GPT model...&#34;) gpt_model = GPTModel( config=transformer_config, transformer_layer_spec=get_gpt_layer_local_spec(), vocab_size=100, max_sequence_length=_SEQUENCE_LENGTH, ) print(gpt_model) print(&#34;GPT model created.&#34;) return gpt_model å¯ä»¥çœ‹åˆ°æ¨¡å‹åˆå§‹åŒ–åˆ†ä¸ºä¸¤æ­¥ï¼š
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-11 00:00:00 +0000 UTC'>November 11, 2025</span>&nbsp;Â·&nbsp;<span>fandengdong</span></footer>
  <a class="entry-link" aria-label="post link to å¼€å§‹ä½¿ç”¨ Mindspeed" href="http://localhost:1313/llm/mindspeed/get_started_with_mindspeed/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">MindspeedåŸºæœ¬ä»‹ç»
    </h2>
  </header>
  <div class="entry-content">
    <p>The core purpose of MindSpeed is to efficiently adapt and accelerate large models based on Megatron-LM for training and inference on Huawei Ascend AI hardware. Its key functionalities include:
Framework Compatibility: Adapting native Megatron-LM code to the Ascend NPU architecture to ensure correct functionality. Performance Optimization: Enhancing training and inference efficiency through techniques such as operator fusion, memory optimization, and communication acceleration. Multi-Level Acceleration: Offering configurable optimization tiers (e.g., basic compatibility, affinity enhancement, full acceleration) that users can enable based on their needs. Ecosystem Integration: Deep integration with Ascend software stacks like CANN and MindSpore for seamless hardware-software co-optimization. In short, MindSpeed enables Megatron-based large models to run correctly, run fast, and run reliably on Ascend devices.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-10 00:00:00 +0000 UTC'>November 10, 2025</span>&nbsp;Â·&nbsp;<span>fandengdong</span></footer>
  <a class="entry-link" aria-label="post link to MindspeedåŸºæœ¬ä»‹ç»" href="http://localhost:1313/llm/mindspeed/introduction_with_mindspeed/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Deploying vLLM in Production
    </h2>
  </header>
  <div class="entry-content">
    <p>Getting Started with vLLM Deployment Deploying large language models efficiently requires careful consideration of hardware resources and configuration parameters.
Installation Installing vLLM is straightforward using pip:
pip install vllm </p>
  </div>
  <footer class="entry-footer"><span title='2024-01-20 00:00:00 +0000 UTC'>January 20, 2024</span>&nbsp;Â·&nbsp;<span>fandengdong</span></footer>
  <a class="entry-link" aria-label="post link to Deploying vLLM in Production" href="http://localhost:1313/llm/vllm/deployment/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">vLLM Optimization Techniques
    </h2>
  </header>
  <div class="entry-content">
    <p>Introduction In this post, weâ€™ll explore the key optimization techniques that make vLLM one of the most efficient inference engines for large language models.
Key Optimizations PagedAttention PagedAttention is vLLMâ€™s core innovation that efficiently manages the GPU memory for attention keys and values. This technique significantly reduces memory fragmentation and allows for serving more requests simultaneously.
Continuous Batching Unlike traditional static batching, vLLM employs continuous batching which dynamically adds new requests to the batch as they arrive, improving throughput without increasing latency.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-01-15 00:00:00 +0000 UTC'>January 15, 2024</span>&nbsp;Â·&nbsp;<span>fandengdong</span></footer>
  <a class="entry-link" aria-label="post link to vLLM Optimization Techniques" href="http://localhost:1313/llm/vllm/optimization/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">My work notes</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
